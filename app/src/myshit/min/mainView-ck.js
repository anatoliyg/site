define(function(t,i,o){function s(t){this.that=this,this.MAIN_CONTEXT=t,this.surfaces=[],this.modifiers=[],this.transforms=[],this.viewRotationY=0,this.pagesCount=10,this.dragPosition=[0,0];var i=n.rotateY(this.viewRotationY*(Math.PI/180)),o=n.rotateX(20*(Math.PI/180));this.currentTransform=n.multiply(o,i),this.coreModifier=new e({opacity:1,transform:this.currentTransform,origin:[.5,.5]}),this.theView=new a,this.viewer=this.theView.add(this.coreModifier),this.MAIN_CONTEXT.add(this.viewer);var s=new m({label:"Slide this",fillColor:"rgba(400, 470, 170, 1)"});this.buildSurfaces(),this.addListener()}var r=t("famous/core/Surface"),e=t("famous/core/Modifier"),n=t("famous/core/Transform"),a=t("famous/core/View"),f=t("famous/views/HeaderFooterLayout"),u=t("famous/views/GridLayout"),h=t("famous/core/Engine"),c=t("famous/inputs/GenericSync"),d=t("famous/inputs/MouseSync"),p=t("famous/inputs/TouchSync"),l=t("famous/inputs/ScrollSync"),m=t("famous/widgets/Slider"),v=t("famous/views/Flipper");s.prototype.addListener=function w(t){var i=new c(function(){return[0,0]},{syncClasses:[d,p,l]});h.pipe(i),i.on("start",function(t){this.dragPosition=[0,0]}.bind(this)),i.on("update",function(t){this.dragPosition[0]+=t.position[0],this.dragPosition[1]+=t.position[1],this.moveSurfacesForward(t.position[1]/10),this.tiltSurfacesBy(t.position[0]/200)}.bind(this)),i.on("end",function(t){}.bind(this))},s.prototype.buildSurfaces=function g(){for(var t=0;t<this.pagesCount;t++){var i=new r({size:[700,700],content:"<h1>"+t+"</h1>",properties:{lineHeight:"60px",fontSize:"110px",textAlign:"center",backgroundColor:"hsl("+360*t/8+", 100%, 50%)",borderColor:"black",borderStyle:"solid",borderWidth:"30px"}}),o=n.translate(0,0,-400*t),s=1/this.pagesCount,a=new e({origin:[.5,.5],transform:o,opacity:s*t});this.surfaces.push(i),this.modifiers.push(a),this.transforms.push(o),this.viewer.add(a).add(i)}var f=this;h.on("click",function(){})},s.prototype.tiltSurfacesBy=function y(t){console.log("haaaa"),this.viewRotationY+=t;var i=n.rotateY(this.viewRotationY*(Math.PI/180));this.coreModifier.setTransform(i)},s.prototype.moveSurfacesForward=function S(t){for(var i=this,o=0;o<i.surfaces.length;o++){var s=i.surfaces[o],r=i.transforms[o],e=n.getTranslate(r)[2],a=e-t,f=i.modifiers[o],u=n.translate(0,0,a);f.setTransform(u),i.transforms[o]=u}},s.prototype.moveUpOne=function T(){for(var t=this.that,i=0;i<t.surfaces.length;i++){var o=t.surfaces[i],s=t.transforms[i],r=n.getTranslate(s)[2],e=r+400,a=t.modifiers[i],f=n.translate(0,0,e);a.setTransform(f,{duration:300,curve:"easeInOut"}),t.transforms[i]=theTrans}},s.prototype.getView=function b(){return this.theView},s.prototype.getModifier1=function M(){return this.outlineModifier1},o.exports=s});